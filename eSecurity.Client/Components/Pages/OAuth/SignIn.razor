@page "/account/oauth/sign-in/"

@using System.Text.Json
@using eSecurity.Core.Security.Authorization.OAuth

@inherits PageBase

<Title Text="Sign-in for eSecurity via OAuth"/>

@code {

    [SupplyParameterFromQuery(Name = "state")]
    public string State { get; set; } = string.Empty;

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            var encodedState = WebEncoders.Base64UrlDecode(State);
            var stateJson = Encoding.UTF8.GetString(encodedState);
            var state = JsonSerializer.Deserialize<OAuthState>(stateJson);
        }
    }

}
