@page "/account/oauth/login/"
@inject NavigationManager NavigationManager
@inject AuthenticationManager AuthenticationManager
@inject ISnackbar Snackbar

@code {
    [SupplyParameterFromQuery(Name = "accessToken")] public string AccessToken { get; set; } = string.Empty;
    [SupplyParameterFromQuery(Name = "refreshToken")] public string RefreshToken { get; set; } = string.Empty;

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        await AuthenticationManager.LogInAsync(AccessToken, RefreshToken);
        NavigationManager.NavigateTo(("/products"));

        Snackbar.Add("Successfully logged in.", Severity.Success);
    }
}
