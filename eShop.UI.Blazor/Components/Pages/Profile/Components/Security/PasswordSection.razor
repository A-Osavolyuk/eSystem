<MudCard Outlined="true" Class="pa-3">
    <MudCardHeader Class="e-card-header">
        <MudStack Spacing="0">
            <MudText Typo="Typo.h6">
                Password
            </MudText>
            @if (Model.PasswordChangeDate is not null)
            {
                <MudText Align="Align.Start" Typo="Typo.caption" Class="opacity-50 mb-2">
                    Last change: @Model.PasswordChangeDate?.ToString("MM/dd/yyyy HH:mm")
                </MudText>
            }
        </MudStack>
    </MudCardHeader>
    <MudCardActions>
        <MudStack Row="true" Spacing="1">
            @if (Model.HasPassword)
            {
                <MudLoadingButton
                    Color="Color.Primary"
                    Variant="Variant.Filled"
                    ButtonType="ButtonType.Button"
                    OnClick="@(async () => await OnChange.InvokeAsync())">
                    Change password
                </MudLoadingButton>
                <MudLoadingButton
                    Color="Color.Error"
                    Variant="Variant.Outlined"
                    ButtonType="ButtonType.Button"
                    OnClick="@(async () => await OnReset.InvokeAsync())">
                    Reset password
                </MudLoadingButton>
            }
            else
            {
                <MudLoadingButton
                    Color="Color.Primary"
                    Variant="Variant.Filled"
                    ButtonType="ButtonType.Button"
                    OnClick="@(async () => await OnAdd.InvokeAsync())">
                    Add password
                </MudLoadingButton>
            }
        </MudStack>
    </MudCardActions>
</MudCard>

<style>
    .e-card-header {
        padding-left: 8px;
        padding-top: 0;
    }

    .e-card-content {
        padding-left: 8px;
        padding-top: 0;
    }
</style>

@code {
    [Parameter] public UserModel Model { get; set; } = new();
    [Parameter] public EventCallback OnAdd { get; set; }
    [Parameter] public EventCallback OnChange { get; set; }
    [Parameter] public EventCallback OnReset { get; set; }
}