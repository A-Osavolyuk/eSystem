@using eShop.Infrastructure.Routing

@inject RouteManager RouteManager

<MudStack Spacing="2">
    <MudPaper Outlined="true" Class="pt-3 pl-5 pr-5 pb-2">
        <MudStack Spacing="0">
            <MudStack Row="true">
                <MudText Typo="Typo.h6">
                    Username
                </MudText>
                <MudSpacer/>
                <MudTooltip Text="Change username">
                    <MudIconButton
                        Icon="@Icons.Material.Filled.Edit"
                        Color="Color.Primary"
                        Variant="Variant.Filled"
                        OnClick="@(async () => await OnChange.InvokeAsync())"/>
                </MudTooltip>
            </MudStack>
            <MudStack Row="true" Spacing="1">
                <MudText Style="padding-top: 5px">@Model.UserName</MudText>
                <MudChip Class="mx-0" T="string" Color="Color.Info" Variant="Variant.Outlined" Size="Size.Small">
                    Unique
                </MudChip>
                @if (Model.UserNameChangeDate is not null)
                {
                    <MudTooltip Text="@($"Last change: {Model.UserNameChangeDate?.ToString("MM/dd/yyyy HH:mm")}")">
                        <MudChip
                            T="string"
                            Class="mx-0"
                            Color="Color.Warning"
                            Variant="Variant.Outlined"
                            Size="Size.Small">
                            Changed
                        </MudChip>
                    </MudTooltip>
                }
            </MudStack>
            <MudText Class="opacity-50" Typo="Typo.caption">
                This username will be shown for other users.
            </MudText>
        </MudStack>
    </MudPaper>
    <MudPaper Outlined="true" Class="pt-3 pl-5 pr-5 pb-2">
        <MudStack Spacing="0">
            <MudStack Row="true">
                <MudText Typo="Typo.h6">
                    Email
                </MudText>
                <MudSpacer/>
                <MudTooltip Text="Change email">
                    <MudIconButton
                        Icon="@Icons.Material.Filled.Edit"
                        Color="Color.Primary"
                        Variant="Variant.Filled"
                        OnClick="@(async () => await RouteManager.NavigateAsync("/account/email/change"))"/>
                </MudTooltip>
            </MudStack>
            <MudStack Row="true" Spacing="1">
                <MudText Style="padding-top: 5px">@Model.Email</MudText>
                <MudChip Class="mx-0" T="string" Color="Color.Info" Variant="Variant.Outlined" Size="Size.Small">
                    Primary
                </MudChip>
                <MudChip Class="mx-0" T="string" Color="Color.Success" Variant="Variant.Outlined" Size="Size.Small">
                    Verified
                </MudChip>
                @if (Model.EmailChangeDate is not null)
                {
                    <MudTooltip Text="@($"Last change: {Model.EmailChangeDate?.ToString("MM/dd/yyyy HH:mm")}")">
                        <MudChip
                            T="string"
                            Class="mx-0"
                            Color="Color.Warning"
                            Variant="Variant.Outlined"
                            Size="Size.Small">
                            Changed
                        </MudChip>
                    </MudTooltip>
                }
            </MudStack>
            <MudText Class="opacity-50" Typo="Typo.caption">
                Notifications will be sent to this email address.
            </MudText>
        </MudStack>
    </MudPaper>
    <MudPaper Outlined="true" Class="pt-3 pl-5 pr-5 pb-2">
        <MudStack Spacing="0">
            <MudStack Row="true">
                <MudText Typo="Typo.h6">
                    Phone number
                </MudText>
                <MudSpacer/>
                @if (!string.IsNullOrEmpty(Model.PhoneNumber))
                {
                    <MudTooltip Text="Change phone number">
                        <MudIconButton
                            Icon="@Icons.Material.Filled.Edit"
                            Color="Color.Primary"
                            Variant="Variant.Filled"
                            OnClick="@(async () => await RouteManager.NavigateAsync("/account/phone-number/change"))"/>
                    </MudTooltip>
                }
                else
                {
                    <MudTooltip Text="Add phone number">
                        <MudIconButton
                            Icon="@Icons.Material.Filled.Add"
                            Color="Color.Primary"
                            Variant="Variant.Filled"
                            OnClick="@(async () => await RouteManager.NavigateAsync("/account/phone-number/add"))"/>
                    </MudTooltip>
                }
            </MudStack>
            @if (!string.IsNullOrEmpty(Model.PhoneNumber))
            {
                <MudStack Row="true" Spacing="1">
                    <MudText Style="padding-top: 5px">@Model.PhoneNumber</MudText>
                    <MudTooltip Text="Verified at: 25/01/01 12:00 +03:00">
                        <MudChip
                            T="string"
                            Class="mx-0"
                            Color="Color.Success"
                            Variant="Variant.Outlined"
                            Size="Size.Small">
                            Verified
                        </MudChip>
                    </MudTooltip>
                    @if (Model.PhoneNumberChangeDate is not null)
                    {
                        <MudTooltip Text="@($"Last change: {Model.PhoneNumberChangeDate?.ToString("MM/dd/yyyy HH:mm")}")">
                            <MudChip
                                T="string"
                                Class="mx-0"
                                Color="Color.Warning"
                                Variant="Variant.Outlined"
                                Size="Size.Small">
                                Changed
                            </MudChip>
                        </MudTooltip>
                    }
                </MudStack>
                <MudText Class="opacity-50" Typo="Typo.caption">
                    SMS messages will be sent to this phone number.
                </MudText>
            }
            else
            {
                <MudText Class="opacity-50" Typo="Typo.caption">
                    Phone number was not added. You can add it by click button right.
                </MudText>
            }
        </MudStack>
    </MudPaper>
</MudStack>

@code {
    [Parameter] public UserModel Model { get; set; } = new();
    [Parameter] public EventCallback OnChange { get; set; }
}