@page "/Error"

@layout ErrorLayout

<Title Text="Error" />

<MudGrid Justify="Justify.Center">
    <MudItem xs="6">
        @switch (Code)
        {
            case StatusCodes.Status404NotFound:
            {
                <MudText Align="Align.Center" Typo="Typo.h4">Page not found</MudText>
                <MudText Align="Align.Center" Typo="Typo.h5">Sorry, the page you are looking for does not exist.</MudText>
                <MudLink Style="text-align:center" Class="d-block" Typo="Typo.h5" Href="/products">Go to Home</MudLink>
                break;
            }
            case StatusCodes.Status403Forbidden:
            {
                <MudText Align="Align.Center" Typo="Typo.h4">Access denied</MudText>
                <MudText Align="Align.Center" Typo="Typo.h5">You do not have access to this resource.</MudText>
                <MudLink Style="text-align:center" Class="d-block" Typo="Typo.h5" Href="/products">Go to Home</MudLink>
                break;
            }
            case StatusCodes.Status401Unauthorized:
            {
                <MudText Align="Align.Center" Typo="Typo.h4">Not authorized</MudText>
                <MudText Align="Align.Center" Typo="Typo.h5">Sorry, you have to be authorized to navigate this page.</MudText>
                <MudText Align="Align.Center" Typo="Typo.h5">Log in your account to come back to this page.</MudText>
                <MudLink Style="text-align:center" Class="d-block" Typo="Typo.h5" Href="@ToLoginPage()">Go to Login</MudLink>
                break;
            }
        }
    </MudItem>
</MudGrid>

@code {
    [SupplyParameterFromQuery(Name = "code")] public int Code { get; set; }
    [SupplyParameterFromQuery(Name = "returnUri")] public string? ReturnUri { get; set; }

    private string ToLoginPage()
    {
        var builder = new StringBuilder("/account/login");

        return !string.IsNullOrEmpty(ReturnUri) ? builder.Append($"?returnUri={ReturnUri}").ToString() : builder.ToString(); 
    }
}
