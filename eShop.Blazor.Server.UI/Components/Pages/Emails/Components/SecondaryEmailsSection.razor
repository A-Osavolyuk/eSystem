@if (Model is not null)
{
    <MudPaper Outlined="true" Class="pa-3">
        <MudStack Spacing="1">
            <MudStack Row="true" Spacing="1">
                <MudText Typo="Typo.h6">Secondary emails</MudText>
                @if (Model.SecondaryEmails.Count <= 3)
                {
                    <MudSpacer/>
                    <MudTooltip Text="Add secondary email">
                        <MudIconButton
                            Icon="@Icons.Material.Filled.Add"
                            Color="Color.Primary"
                            Variant="Variant.Filled"
                            Href=@($"/account/email/add?type={EmailTypes.Secondary}")/>
                    </MudTooltip>
                }
            </MudStack>
            <MudStack Spacing="2">
                @foreach (var email in Model.SecondaryEmails)
                {
                    <MudStack Row="true" Spacing="1">
                        <MudText Class="pt-1"> @email.Email </MudText>
                        @if (email is { IsVerified: true, VerifiedDate: not null })
                        {
                            <MudTooltip
                                Text="@($"Verified at: {email.VerifiedDate?.ToString("MM/dd/yyyy HH:mm")}")">
                                <MudChip
                                    T="string"
                                    Class="mx-0"
                                    Color="Color.Success"
                                    Variant="Variant.Outlined"
                                    Size="Size.Small">
                                    Verified
                                </MudChip>
                            </MudTooltip>
                        }
                        else
                        {
                            <MudTooltip Text="This email address is not verified">
                                <MudChip
                                    T="string"
                                    Class="mx-0"
                                    Color="Color.Error"
                                    Variant="Variant.Outlined"
                                    Size="Size.Small">
                                    Unverified
                                </MudChip>
                            </MudTooltip>
                        }
                        @if (email.UpdateDate.HasValue)
                        {
                            <MudTooltip
                                Text="@($"Last change: {email.UpdateDate?.ToString("MM/dd/yyyy HH:mm")}")">
                                <MudChip
                                    T="string"
                                    Class="mx-0"
                                    Color="Color.Warning"
                                    Variant="Variant.Outlined"
                                    Size="Size.Small">
                                    Changed
                                </MudChip>
                            </MudTooltip>
                        }
                        <MudSpacer/>
                        @if (!email.IsVerified)
                        {
                            <MudTooltip Text="Verify primary email">
                                <MudIconButton
                                    Icon="@Icons.Material.Filled.Check"
                                    Color="Color.Primary"
                                    Variant="Variant.Filled"
                                    Href=@($"/account/email/verify?type={EmailTypes.Primary}&email={email.Email}")/>
                            </MudTooltip>
                        }
                        else
                        {
                            <MudTooltip Text="Remove primary email">
                                <MudIconButton
                                    Icon="@Icons.Material.Filled.Delete"
                                    Color="Color.Error"
                                    Variant="Variant.Filled"
                                    Href=@($"/account/email/remove?type={EmailTypes.Secondary}&email={email.Email}")/>
                            </MudTooltip>
                        }
                    </MudStack>
                }
            </MudStack>
            @if (Model.SecondaryEmails.Count == 0)
            {
                <MudText Class="opacity-50" Typo="Typo.caption">
                    There are no secondary email address provided.
                </MudText>
            }
            else
            {
                <MudText Class="opacity-50" Typo="Typo.caption">
                    These email address are additional.
                    You can change their roles or just use in your personal purposes.
                </MudText>
            }
        </MudStack>
    </MudPaper>
}

@code {
    [Parameter] public UserEmailsModel? Model { get; set; }
}